<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>TikTok Analytic</title>
    <link rel="stylesheet" href="{{ url_for('static',filename='css/nicepage.css')}}" media="screen">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/About.css')}}" media="screen">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 4.1.0, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "Site2",
		"logo": "{{ url_for('static',filename='img/tiktok-logo-tik-tok-logo-icon-png-svg.png')}}"
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="TikTok Analytic">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
  </head>
  <body data-home-page="TikTok Analytic.html" data-home-page-title="TikTok Analytic" class="u-body"><header class="u-align-center u-clearfix u-header u-palette-1-dark-2 u-header" id="sec-0de6"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-text u-text-default u-text-1">TikTo<span style="font-size: 4.5rem;"></span>k Analytic
        </p>
        <a href="https://nicepage.com/k/dog-website-templates" class="u-image u-logo u-image-1" data-image-width="3688" data-image-height="4167">
          <img src="{{ url_for('static',filename='img/tiktok-logo-tik-tok-logo-icon-png-svg.png')}}" class="u-logo-image u-logo-image-1">
        </a>
        <p class="u-text u-text-default u-text-2">TikTok views forecasting based on Hastag and Music</p>
      </div></header>
    <section class="u-clearfix u-image u-section-1" id="carousel_472d" data-image-width="2000" data-image-height="1200">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="u-clearfix u-layout-wrap u-layout-wrap-1">
          <div class="u-layout">
            <div class="u-layout-col">
              <div class="u-size-30">
                <div class="u-layout-row">
                  <div class="u-container-style u-layout-cell u-size-60 u-layout-cell-1">
                    <div class="u-container-layout u-valign-middle u-container-layout-1">
                      <div class="u-align-center u-container-style u-group u-radius-50 u-shape-round u-white u-group-1">
                        <div class="u-container-layout u-container-layout-2">
                          <h1 class="u-custom-font u-font-georgia u-text u-text-1">TikTok Forecast Views</h1>
                          <div class="u-form u-form-1">
                            <form action="#" method="POST" class="u-clearfix u-form-spacing-32 u-form-vertical u-inner-form" style="padding: 0px;" source="custom" name="form">
                              <div class="u-form-group u-form-name">
                                <label for="fl-count" class="u-label">Follower count</label>
                                <input type="text" placeholder="Enter the number of follower" id="fl-count" name="follow" class="u-border-2 u-border-black u-border-no-left u-border-no-right u-border-no-top u-input u-input-rectangle u-white" required="" autofocus="autofocus">
                              </div>
                              <div class="u-form-group">
                                <label for="fl-love" class="u-label">Profil love count</label>
                                <input type="text" placeholder="Enter the number of likes" id="fl-love" name="love" class="u-border-2 u-border-black u-border-no-left u-border-no-right u-border-no-top u-input u-input-rectangle u-white" required="required">
                              </div>
                              <div class="u-form-group u-form-group-3">
                                <label for="get-hastag" class="u-label">#Hashtag</label>
                                <div>
                                  <select class="js-example-basic-single" name="state" id="get-hastag" style="width:80%;margin-top:20px;">
                                  <option value="AL">Alabama</option>
                                  <option value="WY">Wyoming</option>
                                  <option value="AL">Alabama</option>
                                  <option value="WY">Wyoming</option>
                                  <option value="AL">Alabama</option>
                                  <option value="WY">Wyoming</option>
                                </select>
                                </div>

<!--                                <input type="text" placeholder="Enter your hashtag" id="get-hastag" name="hastag" class="u-border-2 u-border-black u-border-no-left u-border-no-right u-border-no-top u-input u-input-rectangle u-white">-->
                              </div>
                              <div class="u-form-group u-form-group-3">

                                <label class="u-label">Music</label>
                                <div>
                                  <select class="js-example-basic-single" name="state" id="get-music" style="width:80%;margin-top:20px;">
                                    <option value="AL">Alabama</option>
                                    <option value="WY">Wyoming</option>
                                    <option value="AL">Alabama</option>
                                    <option value="WY">Wyoming</option>
                                    <option value="AL">Alabama</option>
                                    <option value="WY">Wyoming</option>
                                  </select>
                                </div>

<!--                                <input type="text" placeholder="Enter the music title" id="get-music" name="music" class="u-border-2 u-border-black u-border-no-left u-border-no-right u-border-no-top u-input u-input-rectangle u-white">-->
                              </div>
                              <div class="u-form-group u-form-message u-form-textarea u-form-group-5">
                                <label for="estimate" class="u-label">Estimate views of the video</label>
                                <h2 id="estimate">0</h2>
                                <button type="button" class="btn btn-primary" id="tombol-analysis" style="width:300px;height:50px;margin-left:35px;margin-top:20px">analisis</button>
                              </div>

                            </form>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="u-size-30">
                <div class="u-layout-row">
                  <div class="u-container-style u-layout-cell u-size-60 u-layout-cell-2">
                    <div class="u-container-layout u-container-layout-3"></div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </section>


    <footer class="u-align-center u-clearfix u-footer u-palette-1-dark-2 u-footer" id="sec-bbc6"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">This website was created as a final project for the Associate data scientist, Kampus Merdeka</p>
      </div></footer>
  </body>
</html>
<script>
  $(document).ready(function() {
      $('.js-example-basic-single').select2();
      getdatamusic()

  });

  function getdatamusic(){
    let element_music;
    let element_hastag;
     $.ajax({
        url: 'data_option',
        type: 'GET',
        datatType: 'json',
        success: function (data) {
          $.each(data.music, function(i, val) {
          console.log(val)
            element_music += '<option value="'+val+'" data-id="'+val+'">'+val+'</option>';
          });

          $.each(data.hastag, function(i, val) {
            element_hastag += '<option value="'+val+'" data-id="'+val+'">'+val+'</option>';
          });
          $('#get-hastag').html(element_hastag);
          $('#get-music').html(element_music);
         }
      });
    }



  $('#tombol-analysis').click(function(){
       var fl_count = $('#fl-count').val()
       var fl_love = $('#fl-love').val()

       var music_selected = $('#get-music option:selected');
       var music = music_selected.data('id');

       var hastag_selected = $('#get-hastag option:selected');
       var hastag = hastag_selected.data('id');

       analysis(hastag,fl_count,fl_love,music);
  });

  function analysis(hastag,fl_count,fl_love,music){
    console.log(hastag)
    var datajson = JSON.stringify({
          'hastag':hastag,
          'author_follow':fl_count,
          'author_love':fl_love,
          'music':music,
          })
    console.log(datajson)

    $.ajax({
        url:'/analysis',
        type:'post',
        data:datajson,
        contentType: 'application/json',
        dataType: 'json',
        success:function(response){
          console.log(response)
          $('#estimate').text(response.estimate);
        }
      });
  }
</script>